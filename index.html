<!DOCTYPE html>
<html lang="zh_cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SakuraNiroku导航站</title>
    <script src="sites.js"></script>
    <script>
        function getQueryVariable(variable)
        {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i=0;i<vars.length;i++) {
                var pair = vars[i].split("=");
                if(pair[0] == variable){return pair[1];}
            }
            return(false);
        }
        console.log(getQueryVariable("search"))
    </script>
</head>
<body>
    <h1>SakuraNiroku导航站</h1>

    <form action="index.html" method="get">
        <input type="text" name="search">
        <input type="submit" value="GO">
    </form>

    <div id="search"></div>
    <script>
        if(getQueryVariable("search") != false){
            if(getQueryVariable("search") != ""){
                stxt = getQueryVariable("search")
                resl = Object.keys(site).filter((key,_)=>{
                    if(key.includes(stxt)){
                        return true
                    }
                })
                resluat = {}
                for (res in resl){
                    resluat[resl[res]] = site[resl[res]]
                }
                console.log(resluat)
                for(var key in resluat){
                    link = document.createElement("a")
                    link.innerHTML = "    -"+key
                    link.href = resluat[key]
                    search.appendChild(link)
                    search.appendChild(document.createElement("br"))
                }

            }
        }
    </script>

    <h3>星标链接</h3>
    <div id="starlink"></div>
    <script>
        for(var key in starsite){
            link = document.createElement("a")
            link.innerHTML = "    -"+key
            link.href = starsite[key]
            starlink.appendChild(link)
            starlink.appendChild(document.createElement("br"))
        }
    </script>
</body>
</html>